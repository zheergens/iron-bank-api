{% extends "base.html" %}

{% block title %}登录 - 后台管理系统{% endblock %}

{% block head_css %}
{{ super() }}
<style>
body {
    background-color: #f0f2f5;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.05'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
}

.login-container {
    width: 100%;
    max-width: 420px;
    margin: 0 auto;
    padding: 40px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

.login-logo {
    text-align: center;
    margin-bottom: 24px;
}

.login-logo img {
    width: 48px;
    height: 48px;
}

.login-header {
    text-align: center;
    margin-bottom: 40px;
}

.login-header h1 {
    font-size: 28px;
    color: #1a1a1a;
    margin: 0 0 8px;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
}

.login-header h1 i {
    color: #1890ff;
    font-size: 32px;
}

.login-header p {
    color: #666;
    margin: 0;
    font-size: 14px;
}

.login-form {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.form-group {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.form-group i {
    position: absolute;
    left: 16px;
    top: 38px;
    color: #bfbfbf;
    font-size: 16px;
}

.form-label {
    font-size: 14px;
    color: #333;
    font-weight: 500;
}

.form-input {
    height: 44px;
    padding: 8px 16px 8px 40px;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    font-size: 14px;
    transition: all 0.3s;
    background-color: #f8f9fa;
}

.form-input:focus {
    border-color: #1890ff;
    background-color: #fff;
    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.1);
    outline: none;
}

.form-input::placeholder {
    color: #bfbfbf;
}

.remember-me {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 4px;
}

.remember-me-left {
    display: flex;
    align-items: center;
    gap: 8px;
}

.remember-me label {
    font-size: 14px;
    color: #666;
    cursor: pointer;
}

.forgot-password {
    font-size: 14px;
    color: #1890ff;
    text-decoration: none;
}

.forgot-password:hover {
    color: #40a9ff;
}

.btn-login {
    height: 44px;
    background: #1890ff;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s;
    width: 100%;
}

.btn-login:hover {
    background: #40a9ff;
}

.btn-login:active {
    background: #096dd9;
}

.flash-messages {
    margin-bottom: 24px;
}

.flash-message {
    padding: 12px 16px;
    border-radius: 8px;
    font-size: 14px;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.flash-message i {
    font-size: 16px;
}

.flash-message.error {
    background: #fff2f0;
    border: 1px solid #ffccc7;
    color: #ff4d4f;
}

.login-footer {
    text-align: center;
    margin-top: 24px;
    color: #8c8c8c;
    font-size: 12px;
}
</style>
{% endblock %}

{% block content %}
<div class="login-container">
    <div class="login-logo">
        <i class="fas fa-shield-alt" style="font-size: 48px; color: #1890ff;"></i>
    </div>
    <div class="login-header">
        <h1>后台管理系统</h1>
        <p>欢迎使用，请登录</p>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <div class="flash-messages">
            {% for category, message in messages %}
                <div class="flash-message {{ category }}">
                    <i class="fas fa-exclamation-circle"></i>
                    {{ message }}
                </div>
            {% endfor %}
        </div>
        {% endif %}
    {% endwith %}

    <form method="POST" class="login-form">
        {{ form.csrf_token }}
        <div class="form-group">
            {{ form.username.label(class="form-label") }}
            <i class="fas fa-user"></i>
            {{ form.username(class="form-input", placeholder="请输入用户名") }}
        </div>

        <div class="form-group">
            {{ form.password.label(class="form-label") }}
            <i class="fas fa-lock"></i>
            {{ form.password(class="form-input", placeholder="请输入密码") }}
        </div>

        <div class="remember-me">
            <div class="remember-me-left">
                {{ form.remember() }}
                {{ form.remember.label }}
            </div>
            <a href="#" class="forgot-password">忘记密码？</a>
        </div>

        {{ form.submit(class="btn-login") }}
    </form>

    <div class="login-footer">
        Copyright © {{ current_year }} 后台管理系统 All Rights Reserved
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
document.getElementById('username').focus();

// 添加密码显示/隐藏功能
const passwordInput = document.getElementById('password');
const togglePassword = document.createElement('i');
togglePassword.className = 'fas fa-eye';
togglePassword.style.cssText = 'position: absolute; right: 16px; top: 38px; color: #bfbfbf; cursor: pointer;';
passwordInput.parentNode.appendChild(togglePassword);

togglePassword.addEventListener('click', function() {
    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
    passwordInput.setAttribute('type', type);
    this.className = `fas fa-eye${type === 'password' ? '' : '-slash'}`;
});
</script>
{% endblock %} 